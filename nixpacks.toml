# Nixpacks configuration for Coolify
# Simple configuration for AdonisJS 6

# Disable auto-detection (prevents Caddy from being added)
providers = []

[phases.setup]
nixPkgs = ["nodejs_22"]

[phases.install]
cmds = ["npm ci"]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "node build/bin/server.js"

[variables]
NPM_CONFIG_PRODUCTION = "false"
